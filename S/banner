#!/bin/sh -eu

. "$(dirname "$0")/COMMON"

## pipe to it
calculate_length()( python3 -c 'import sys; from wcwidth import wcswidth; print(max(wcswidth(line[:-1]) for line in sys.stdin))' )

print_banner() ### var $variant
{
	banner="$dir/BANNERS/$variant"
	[ -f "$banner" ] || exit 1
	if [ "$(tput cols)" -ge "$(head -1 "$banner")" ]
	then tail +3 "$banner"
	else tail +2 "$banner" | head -1 ; repeat "$(tput cols)" 'â”€'
	fi
}

get_variant()
{
[ "$in_termux" = 1 ] && variant="termux" && return || :
case "$(lsb_release -sc)" in
chimera) variant="chimera";;
alpine) variant="alpine";;
*) variant="DEFAULT"
esac
}

## main
## variant override
variant="${1-}"
[ "$variant" ] || get_variant
print_banner
